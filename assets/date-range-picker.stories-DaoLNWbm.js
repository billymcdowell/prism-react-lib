import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r as g}from"./iframe-DCkxxG1M.js";import{B as S}from"./button-24IbpKd0.js";import{P as Z,a as ee,b as te}from"./popover-BRe-Eyfd.js";import{C as re}from"./calendar-bG2iU42K.js";import{L as _}from"./label-BBsqXW3q.js";import{S as G}from"./switch-BGZaEa9H.js";import{c as z}from"./utils-CDN07tui.js";import{f as ae,g as J,S as oe,a as se,b as ne,d as ce}from"./sheet-CMEXKATE.js";import{u as le,a as ie}from"./use-mobile-CMlha3p1.js";import{C as me}from"./chevron-up-kQbxDiku.js";import{C as de}from"./chevron-down-gTzlla0Z.js";import{C as ue}from"./check-CKaAtdKA.js";import"./preload-helper-PPVm8Dsz.js";import"./index-CC6UOoUx.js";import"./index-1RQFIDbb.js";import"./index-B_jtOnfb.js";import"./index-D4S5tJ3X.js";import"./index-DtPqNasm.js";import"./index-WKj01Sjb.js";import"./index-43ruBWII.js";import"./index-DS2pokXW.js";import"./index-C3YZHoUw.js";import"./index-WZ-W2zvz.js";import"./index-BjL8KPEi.js";import"./index-8LWTxVwk.js";import"./index-gIDCD3x8.js";import"./index-DZpS6rNL.js";import"./index-DIMsnaCs.js";import"./index-DF4DGjam.js";import"./index-CGRKrnw5.js";import"./chevron-left-Di3HPsp1.js";import"./createLucideIcon-EM5MBisu.js";import"./chevron-right-ByFpuFv8.js";import"./index-cztd825r.js";import"./index-C7upyPfs.js";import"./x-PGRCWagm.js";const P=(s,l="en-us")=>s.toLocaleDateString(l,{month:"short",day:"numeric",year:"numeric"}),y=s=>{if(typeof s=="string"){const l=s.split("-").map(i=>parseInt(i,10));return new Date(l[0],l[1]-1,l[2])}else return s},V=[{name:"today",label:"Today"},{name:"yesterday",label:"Yesterday"},{name:"last7",label:"Last 7 days"},{name:"last14",label:"Last 14 days"},{name:"last30",label:"Last 30 days"},{name:"thisWeek",label:"This Week"},{name:"lastWeek",label:"Last Week"},{name:"thisMonth",label:"This Month"},{name:"lastMonth",label:"Last Month"}],H=({value:s,onChange:l,className:p})=>{const[i,D]=g.useState(()=>{const a=s?new Date(s):new Date;return{day:a.getDate(),month:a.getMonth()+1,year:a.getFullYear()}}),R=g.useRef(null),j=g.useRef(null),N=g.useRef(null);g.useEffect(()=>{const a=s?new Date(s):new Date;D({day:a.getDate(),month:a.getMonth()+1,year:a.getFullYear()})},[s]);const v=(a,n)=>{if(a==="day"&&(n<1||n>31)||a==="month"&&(n<1||n>12)||a==="year"&&(n<1e3||n>9999))return!1;const o={...i,[a]:n},h=new Date(o.year,o.month-1,o.day);return h.getFullYear()===o.year&&h.getMonth()+1===o.month&&h.getDate()===o.day},x=a=>n=>{const o=n.target.value?Number(n.target.value):"",h=typeof o=="number"&&v(a,o),C={...i,[a]:o};D(C),h&&l(new Date(C.year,C.month-1,C.day))},r=g.useRef(i),f=a=>n=>{if(!n.target.value){D(r.current);return}const o=Number(n.target.value);v(a,o)?r.current={...i,[a]:o}:D(r.current)},m=a=>n=>{if(!(n.metaKey||n.ctrlKey)){if(!/^[0-9]$/.test(n.key)&&!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Delete","Tab","Backspace","Enter"].includes(n.key)){n.preventDefault();return}if(n.key==="ArrowUp"){n.preventDefault();let o={...i};a==="day"&&(i[a]===new Date(i.year,i.month,0).getDate()?(o={...o,day:1,month:i.month%12+1},o.month===1&&(o.year+=1)):o.day+=1),a==="month"&&(i[a]===12?o={...o,month:1,year:i.year+1}:o.month+=1),a==="year"&&(o.year+=1),D(o),l(new Date(o.year,o.month-1,o.day))}else if(n.key==="ArrowDown"){n.preventDefault();let o={...i};a==="day"&&(i[a]===1?(o.month-=1,o.month===0&&(o.month=12,o.year-=1),o.day=new Date(o.year,o.month,0).getDate()):o.day-=1),a==="month"&&(i[a]===1?o={...o,month:12,year:i.year-1}:o.month-=1),a==="year"&&(o.year-=1),D(o),l(new Date(o.year,o.month-1,o.day))}n.key==="ArrowRight"?(n.currentTarget.selectionStart===n.currentTarget.value.length||n.currentTarget.selectionStart===0&&n.currentTarget.selectionEnd===n.currentTarget.value.length)&&(n.preventDefault(),a==="month"&&j.current?.focus(),a==="day"&&N.current?.focus()):n.key==="ArrowLeft"&&(n.currentTarget.selectionStart===0||n.currentTarget.selectionStart===0&&n.currentTarget.selectionEnd===n.currentTarget.value.length)&&(n.preventDefault(),a==="day"&&R.current?.focus(),a==="year"&&j.current?.focus())}};return e.jsxs("div",{className:z("flex border rounded-lg items-center text-sm px-1",p),children:[e.jsx("input",{type:"text",ref:R,max:12,maxLength:2,value:i.month.toString(),onChange:x("month"),onKeyDown:m("month"),onFocus:a=>{window.innerWidth>1024&&a.target.select()},onBlur:f("month"),className:"p-0 outline-none w-6 border-none text-center",placeholder:"M"}),e.jsx("span",{className:"opacity-20 -mx-px",children:"/"}),e.jsx("input",{type:"text",ref:j,max:31,maxLength:2,value:i.day.toString(),onChange:x("day"),onKeyDown:m("day"),onFocus:a=>{window.innerWidth>1024&&a.target.select()},onBlur:f("day"),className:"p-0 outline-none w-6 border-none text-center",placeholder:"D"}),e.jsx("span",{className:"opacity-20 -mx-px",children:"/"}),e.jsx("input",{type:"text",ref:N,max:9999,maxLength:4,value:i.year.toString(),onChange:x("year"),onKeyDown:m("year"),onFocus:a=>{window.innerWidth>1024&&a.target.select()},onBlur:f("year"),className:"p-0 outline-none w-12 border-none text-center",placeholder:"YYYY"})]})},T=({initialDateFrom:s=new Date(new Date().setHours(0,0,0,0)),initialDateTo:l,initialCompareFrom:p,initialCompareTo:i,onUpdate:D,align:R="end",locale:j="en-US",showCompare:N=!0})=>{const[v,x]=g.useState(!1),[r,f]=g.useState({from:y(s),to:y(l||s)}),[m,a]=g.useState(p?{from:new Date(new Date(p).setHours(0,0,0,0)),to:i?new Date(new Date(i).setHours(0,0,0,0)):new Date(new Date(p).setHours(0,0,0,0))}:void 0),n=g.useRef(void 0),o=g.useRef(void 0),[h,C]=g.useState(void 0),w=le(),K=ie(),O=t=>{const d=V.find(({name:B})=>B===t);if(!d)throw new Error(`Unknown date range preset: ${t}`);const c=new Date,u=new Date,F=c.getDate()-c.getDay();switch(d.name){case"today":c.setHours(0,0,0,0),u.setHours(23,59,59,999);break;case"yesterday":c.setDate(c.getDate()-1),c.setHours(0,0,0,0),u.setDate(u.getDate()-1),u.setHours(23,59,59,999);break;case"last7":c.setDate(c.getDate()-6),c.setHours(0,0,0,0),u.setHours(23,59,59,999);break;case"last14":c.setDate(c.getDate()-13),c.setHours(0,0,0,0),u.setHours(23,59,59,999);break;case"last30":c.setDate(c.getDate()-29),c.setHours(0,0,0,0),u.setHours(23,59,59,999);break;case"thisWeek":c.setDate(F),c.setHours(0,0,0,0),u.setHours(23,59,59,999);break;case"lastWeek":c.setDate(c.getDate()-7-c.getDay()),u.setDate(u.getDate()-u.getDay()-1),c.setHours(0,0,0,0),u.setHours(23,59,59,999);break;case"thisMonth":c.setDate(1),c.setHours(0,0,0,0),u.setHours(23,59,59,999);break;case"lastMonth":c.setMonth(c.getMonth()-1),c.setDate(1),c.setHours(0,0,0,0),u.setDate(0),u.setHours(23,59,59,999);break}return{from:c,to:u}},Q=t=>{const d=O(t);if(f(d),m){const c={from:new Date(d.from.getFullYear()-1,d.from.getMonth(),d.from.getDate()),to:d.to?new Date(d.to.getFullYear()-1,d.to.getMonth(),d.to.getDate()):void 0};a(c)}},X=()=>{for(const t of V){const d=O(t.name),c=new Date(r.from);c.setHours(0,0,0,0);const u=new Date(d.from.setHours(0,0,0,0)),F=new Date(r.to??0);F.setHours(0,0,0,0);const B=new Date(d.to?.setHours(0,0,0,0)??0);if(c.getTime()===u.getTime()&&F.getTime()===B.getTime()){C(t.name);return}}C(void 0)},U=()=>{f({from:typeof s=="string"?y(s):s,to:l?typeof l=="string"?y(l):l:typeof s=="string"?y(s):s}),a(p?{from:typeof p=="string"?y(p):p,to:i?typeof i=="string"?y(i):i:typeof p=="string"?y(p):p}:void 0)};g.useEffect(()=>{X()},[r]);const b=(t,d)=>!t||!d?t===d:t.from.getTime()===d.from.getTime()&&(!t.to||!d.to||t.to.getTime()===d.to.getTime());g.useEffect(()=>{v&&(n.current=r,o.current=m)},[v]);const q=e.jsxs(S,{size:"lg",variant:"outline",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"py-1",children:e.jsx("div",{children:`${P(r.from,j)}${r.to!=null?" - "+P(r.to,j):""}`})}),m!=null&&e.jsx("div",{className:"opacity-60 text-xs -mt-1",children:e.jsxs(e.Fragment,{children:["vs. ",P(m.from,j),m.to!=null?` - ${P(m.to,j)}`:""]})})]}),e.jsx("div",{className:"pl-1 opacity-60 -mr-2 scale-125",children:v?e.jsx(me,{width:24}):e.jsx(de,{width:24})})]}),$=e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row p-2 overflow-y-auto max-h-screen",children:[e.jsx("div",{className:"flex justify-center grow",children:e.jsxs("div",{className:"flex flex-col w-full max-w-xs sm:max-w-fit h-[29.25rem] sm:h-auto",children:[e.jsx("div",{className:"h-18 flex items-center",children:e.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(H,{className:"w-full justify-center",value:r.from,onChange:t=>{const d=r.to==null||t>r.to?t:r.to;f(c=>({...c,from:t,to:d}))}}),e.jsx("div",{className:"py-1",children:"-"}),e.jsx(H,{className:"w-full justify-center",value:r.to,onChange:t=>{const d=t<r.from?t:r.from;f(c=>({...c,from:d,to:t}))}})]}),m!=null&&e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx("p",{children:"vs."}),e.jsx(H,{className:"w-full justify-center",value:m?.from,onChange:t=>{if(m){const d=m.to==null||t>m.to?t:m.to;a(c=>({...c,from:t,to:d}))}else a({from:t,to:new Date})}}),e.jsx("div",{className:"py-1",children:"-"}),e.jsx(H,{className:"w-full justify-center",value:m?.to,onChange:t=>{if(m&&m.from){const d=t<m.from?t:m.from;a({...m,from:d,to:t})}}})]})]})}),e.jsx("div",{className:"flex justify-center sm:h-[22rem]",children:e.jsx(re,{classNames:{root:w?"w-full":void 0,months:w?"sm:flex-row":void 0},mode:"range",onSelect:t=>{t?.from!=null&&f({from:t.from,to:t?.to})},selected:r,numberOfMonths:w?1:2,defaultMonth:new Date(new Date().setMonth(new Date().getMonth()-(w?0:1)))})})]})}),e.jsx("div",{className:"sm:max-w-[200px] overflow-x-auto ",children:e.jsx("div",{className:"flex flex-row sm:flex-col gap-1 items-end sm:pt-10 md:pt-0",children:V.map(t=>e.jsxs(S,{className:z(h===t.name&&"pointer-events-none"),variant:h===t.name?"default":w?"outline":"ghost",size:w?"default":"sm",onClick:()=>{Q(t.name)},children:[!w&&e.jsx("span",{className:z("pr-2 opacity-0",h===t.name&&"opacity-70"),children:e.jsx(ue,{width:18,height:18})}),t.label]},t.name))})})]}),K||w?e.jsxs(ae,{children:[e.jsx("div",{className:"flex grow gap-2 w-full",children:N&&e.jsxs("div",{className:"flex items-center space-x-2 pr-4 py-1",children:[e.jsx(G,{defaultChecked:!!m,onCheckedChange:t=>{t?(r.to||f({from:r.from,to:r.from}),a({from:new Date(r.from.getFullYear(),r.from.getMonth(),r.from.getDate()-365),to:r.to?new Date(r.to.getFullYear()-1,r.to.getMonth(),r.to.getDate()):new Date(r.from.getFullYear()-1,r.from.getMonth(),r.from.getDate())})):a(void 0)},id:"compare-mode"}),e.jsx(_,{htmlFor:"compare-mode",children:"Compare"})]})}),e.jsx(J,{asChild:!0,children:e.jsx(S,{onClick:()=>{x(!1),U()},variant:"ghost",children:"Cancel"})}),e.jsx(J,{asChild:!0,children:e.jsx(S,{onClick:()=>{x(!1),(!b(r,n.current)||!b(m,o.current))&&D?.({range:r,rangeCompare:m})},children:"Update"})})]}):e.jsxs("div",{className:"flex justify-end gap-2 py-2 pr-4",children:[e.jsx("div",{className:"flex grow gap-2 w-full",children:N&&e.jsxs("div",{className:"flex items-center space-x-2 pr-4 py-1",children:[e.jsx(G,{defaultChecked:!!m,onCheckedChange:t=>{t?(r.to||f({from:r.from,to:r.from}),a({from:new Date(r.from.getFullYear(),r.from.getMonth(),r.from.getDate()-365),to:r.to?new Date(r.to.getFullYear()-1,r.to.getMonth(),r.to.getDate()):new Date(r.from.getFullYear()-1,r.from.getMonth(),r.from.getDate())})):a(void 0)},id:"compare-mode"}),e.jsx(_,{htmlFor:"compare-mode",children:"Compare"})]})}),e.jsx(S,{onClick:()=>{x(!1),U()},variant:"ghost",children:"Cancel"}),e.jsx(S,{onClick:()=>{x(!1),(!b(r,n.current)||!b(m,o.current))&&D?.({range:r,rangeCompare:m})},children:"Update"})]})]});return K||w?e.jsxs(oe,{children:[e.jsx(se,{asChild:!0,children:q}),e.jsxs(ne,{side:"bottom",onOpenAutoFocus:t=>t.preventDefault(),className:"overflow-y-auto max-h-screen",children:[e.jsx(ce,{children:"Select Date Range"}),$]})]}):e.jsxs(Z,{modal:!0,open:v,onOpenChange:t=>{t||U(),x(t)},children:[e.jsx(ee,{asChild:!0,children:q}),e.jsx(te,{align:R,className:"w-auto max-w-[98dvw] md:max-w-none",children:$})]})};T.displayName="DateRangePicker";T.filePath="libs/shared/ui-kit/src/lib/date-range-picker/date-range-picker.tsx";T.__docgenInfo={description:"The DateRangePicker component allows a user to select a range of dates",methods:[],displayName:"DateRangePicker",props:{initialDateFrom:{defaultValue:{value:"new Date(new Date().setHours(0, 0, 0, 0))",computed:!1},required:!1},align:{defaultValue:{value:"'end'",computed:!1},required:!1},locale:{defaultValue:{value:"'en-US'",computed:!1},required:!1},showCompare:{defaultValue:{value:"true",computed:!1},required:!1}}};const Je={title:"UI/DateRangePicker",component:T,tags:["autodocs"],argTypes:{align:{control:"select",options:["start","center","end"],description:"Alignment of the popover"},locale:{control:"text",description:"Locale for date formatting"},showCompare:{control:"boolean",description:"Enable/disable compare mode"}}},k=s=>{const[l,p]=g.useState({from:s.initialDateFrom,to:s.initialDateTo,compareFrom:s.initialCompareFrom,compareTo:s.initialCompareTo});return e.jsxs("div",{className:"flex flex-col gap-8 items-start",children:[e.jsx(T,{...s,initialDateFrom:l.from,initialDateTo:l.to,initialCompareFrom:l.compareFrom,initialCompareTo:l.compareTo,onUpdate:i=>{p({from:i.range.from,to:i.range.to,compareFrom:i.rangeCompare?.from,compareTo:i.rangeCompare?.to}),s.onUpdate?.(i)}}),e.jsxs("div",{className:"text-sm text-muted-foreground bg-slate-100 p-4 rounded-md max-w-md",children:[e.jsx("p",{children:e.jsx("strong",{children:"Selected Range:"})}),e.jsxs("p",{children:["From: ",l.from instanceof Date?l.from.toLocaleDateString():l.from]}),e.jsxs("p",{children:["To: ",l.to instanceof Date?l.to.toLocaleDateString():l.to]}),s.showCompare&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"mt-2",children:e.jsx("strong",{children:"Compare Range:"})}),e.jsxs("p",{children:["From: ",l.compareFrom instanceof Date?l.compareFrom.toLocaleDateString():l.compareFrom||"N/A"]}),e.jsxs("p",{children:["To: ",l.compareTo instanceof Date?l.compareTo.toLocaleDateString():l.compareTo||"N/A"]})]})]})]})},M={render:s=>e.jsx(k,{...s}),args:{showCompare:!0,align:"center"}},W={render:s=>e.jsx(k,{...s}),args:{initialDateFrom:new Date(new Date().setDate(new Date().getDate()-7)),initialDateTo:new Date,showCompare:!0,align:"center"}},L={render:s=>e.jsx(k,{...s}),args:{showCompare:!1,align:"center"}},E={render:s=>e.jsx(k,{...s}),args:{showCompare:!0,initialDateFrom:new Date(2023,0,1),initialDateTo:new Date(2023,0,31),initialCompareFrom:new Date(2022,0,1),initialCompareTo:new Date(2022,0,31),align:"center"}},Y={render:s=>e.jsx(k,{...s}),args:{align:"start",showCompare:!0}},A={render:s=>e.jsx(k,{...s}),args:{locale:"de-DE",align:"center",showCompare:!0}},I={render:s=>e.jsx(k,{...s}),args:{initialDateFrom:"2024-01-01",initialDateTo:"2024-01-31",showCompare:!0,align:"center"}};M.parameters={...M.parameters,docs:{...M.parameters?.docs,source:{originalSource:`{
  render: args => <DateRangePickerWrapper {...args} />,
  args: {
    showCompare: true,
    align: 'center'
  }
}`,...M.parameters?.docs?.source}}};W.parameters={...W.parameters,docs:{...W.parameters?.docs,source:{originalSource:`{
  render: args => <DateRangePickerWrapper {...args} />,
  args: {
    initialDateFrom: new Date(new Date().setDate(new Date().getDate() - 7)),
    // Last 7 days
    initialDateTo: new Date(),
    showCompare: true,
    align: 'center'
  }
}`,...W.parameters?.docs?.source}}};L.parameters={...L.parameters,docs:{...L.parameters?.docs,source:{originalSource:`{
  render: args => <DateRangePickerWrapper {...args} />,
  args: {
    showCompare: false,
    align: 'center'
  }
}`,...L.parameters?.docs?.source}}};E.parameters={...E.parameters,docs:{...E.parameters?.docs,source:{originalSource:`{
  render: args => <DateRangePickerWrapper {...args} />,
  args: {
    showCompare: true,
    initialDateFrom: new Date(2023, 0, 1),
    initialDateTo: new Date(2023, 0, 31),
    initialCompareFrom: new Date(2022, 0, 1),
    initialCompareTo: new Date(2022, 0, 31),
    align: 'center'
  }
}`,...E.parameters?.docs?.source}}};Y.parameters={...Y.parameters,docs:{...Y.parameters?.docs,source:{originalSource:`{
  render: args => <DateRangePickerWrapper {...args} />,
  args: {
    align: 'start',
    showCompare: true
  }
}`,...Y.parameters?.docs?.source}}};A.parameters={...A.parameters,docs:{...A.parameters?.docs,source:{originalSource:`{
  render: args => <DateRangePickerWrapper {...args} />,
  args: {
    locale: 'de-DE',
    align: 'center',
    showCompare: true
  }
}`,...A.parameters?.docs?.source}}};I.parameters={...I.parameters,docs:{...I.parameters?.docs,source:{originalSource:`{
  render: args => <DateRangePickerWrapper {...args} />,
  args: {
    initialDateFrom: '2024-01-01',
    initialDateTo: '2024-01-31',
    showCompare: true,
    align: 'center'
  }
}`,...I.parameters?.docs?.source}}};const Qe=["Default","WithInitialRange","WithoutCompare","WithComparePresets","AlignStart","LocaleGerman","WithStringInitialValues"];export{Y as AlignStart,M as Default,A as LocaleGerman,E as WithComparePresets,W as WithInitialRange,I as WithStringInitialValues,L as WithoutCompare,Qe as __namedExportsOrder,Je as default};
