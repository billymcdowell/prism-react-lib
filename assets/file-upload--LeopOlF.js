import{j as p}from"./jsx-runtime-u17CrQMm.js";import{c as h}from"./utils-CDN07tui.js";import{r as e}from"./iframe-D2adQVxF.js";import{r as y}from"./index-CFjqNmvz.js";const g=e.createContext(null);function b({onFilesAdded:a,children:i,multiple:t=!0,accept:l,disabled:o=!1}){const s=e.useRef(null),[c,d]=e.useState(!1),f=e.useRef(0),m=e.useCallback(n=>{const u=Array.from(n);a(t?u:u.slice(0,1))},[t,a]);e.useEffect(()=>{const n=r=>{r.preventDefault(),r.stopPropagation()},u=r=>{n(r),f.current++,r.dataTransfer?.items.length&&d(!0)},v=r=>{n(r),f.current--,f.current===0&&d(!1)},w=r=>{n(r),d(!1),f.current=0,r.dataTransfer?.files.length&&m(r.dataTransfer.files)};return window.addEventListener("dragenter",u),window.addEventListener("dragleave",v),window.addEventListener("dragover",n),window.addEventListener("drop",w),()=>{window.removeEventListener("dragenter",u),window.removeEventListener("dragleave",v),window.removeEventListener("dragover",n),window.removeEventListener("drop",w)}},[m,a,t]);const x=n=>{n.target.files?.length&&(m(n.target.files),n.target.value="")};return p.jsxs(g.Provider,{value:{isDragging:c,inputRef:s,multiple:t,disabled:o},children:[p.jsx("input",{type:"file",ref:s,onChange:x,className:"hidden",multiple:t,accept:l,"aria-hidden":!0,disabled:o}),i]})}function C({asChild:a=!1,className:i,children:t,...l}){const o=e.useContext(g),s=()=>o?.inputRef.current?.click();if(a){const c=e.Children.only(t);return e.cloneElement(c,{...l,role:"button",className:h(i,c.props.className),onClick:d=>{d.stopPropagation(),s(),c.props.onClick?.(d)}})}return p.jsx("button",{type:"button",className:i,onClick:s,...l,children:t})}function R({className:a,...i}){const t=e.useContext(g),[l,o]=e.useState(!1);if(e.useEffect(()=>(o(!0),()=>o(!1)),[]),!t?.isDragging||!l||t?.disabled)return null;const s=p.jsx("div",{className:h("bg-background/80 fixed inset-0 z-50 flex items-center justify-center backdrop-blur-sm","animate-in fade-in-0 slide-in-from-bottom-10 zoom-in-90 duration-150",a),...i});return y.createPortal(s,document.body)}b.__docgenInfo={description:"",methods:[],displayName:"FileUpload",props:{onFilesAdded:{required:!0,tsType:{name:"signature",type:"function",raw:"(files: File[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"File"}],raw:"File[]"},name:"files"}],return:{name:"void"}}},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},multiple:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},accept:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};C.__docgenInfo={description:"",methods:[],displayName:"FileUploadTrigger",props:{asChild:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};export{b as F,C as a,R as b};
