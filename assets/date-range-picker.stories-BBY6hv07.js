import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r as u}from"./iframe-CK9smaC8.js";import{B as N}from"./button-BdLVrME1.js";import{P as G,a as J,b as Q}from"./popover-BKtKh0NN.js";import{C as X}from"./calendar-BoMMT9Sd.js";import{L as Z}from"./label-BNnr4jpp.js";import{S as ee}from"./switch-DHc0U2j1.js";import{c as z}from"./utils-CDN07tui.js";import{C as te}from"./chevron-up-DaWlIPZc.js";import{C as re}from"./chevron-down-BBEH_Aqg.js";import{C as ae}from"./check-DD8zL34B.js";import"./preload-helper-PPVm8Dsz.js";import"./index-lxHNymn1.js";import"./index-1dWsAVPB.js";import"./index-B_jtOnfb.js";import"./index-eCitGQw-.js";import"./index-BtDr-iC0.js";import"./index-BYaq2IUm.js";import"./index-DsMv_lJe.js";import"./index-17OvK7hU.js";import"./index-BVJ56w9R.js";import"./index-JYpihZx4.js";import"./index-SWIc9-Yv.js";import"./index-DkXQWpI3.js";import"./index-Cj0DOf1X.js";import"./index-Dyxs7gGj.js";import"./index-DGYCy_xD.js";import"./index-CJ8c7ODA.js";import"./index-iN9rKbtt.js";import"./chevron-left-CSXzGtYw.js";import"./createLucideIcon-DNvLzEEK.js";import"./chevron-right-zDtcAkO_.js";import"./index-Ci0BZeqW.js";const b=(n,i="en-us")=>n.toLocaleDateString(i,{month:"short",day:"numeric",year:"numeric"}),h=n=>{if(typeof n=="string"){const i=n.split("-").map(l=>parseInt(l,10));return new Date(i[0],i[1]-1,i[2])}else return n},U=[{name:"today",label:"Today"},{name:"yesterday",label:"Yesterday"},{name:"last7",label:"Last 7 days"},{name:"last14",label:"Last 14 days"},{name:"last30",label:"Last 30 days"},{name:"thisWeek",label:"This Week"},{name:"lastWeek",label:"Last Week"},{name:"thisMonth",label:"This Month"},{name:"lastMonth",label:"Last Month"}],P=({value:n,onChange:i,className:g})=>{const[l,D]=u.useState(()=>{const r=n?new Date(n):new Date;return{day:r.getDate(),month:r.getMonth()+1,year:r.getFullYear()}}),S=u.useRef(null),w=u.useRef(null),R=u.useRef(null);u.useEffect(()=>{const r=n?new Date(n):new Date;D({day:r.getDate(),month:r.getMonth()+1,year:r.getFullYear()})},[n]);const y=(r,s)=>{if(r==="day"&&(s<1||s>31)||r==="month"&&(s<1||s>12)||r==="year"&&(s<1e3||s>9999))return!1;const a={...l,[r]:s},x=new Date(a.year,a.month-1,a.day);return x.getFullYear()===a.year&&x.getMonth()+1===a.month&&x.getDate()===a.day},j=r=>s=>{const a=s.target.value?Number(s.target.value):"",x=typeof a=="number"&&y(r,a),v={...l,[r]:a};D(v),x&&i(new Date(v.year,v.month-1,v.day))},c=u.useRef(l),f=r=>s=>{if(!s.target.value){D(c.current);return}const a=Number(s.target.value);y(r,a)?c.current={...l,[r]:a}:D(c.current)},d=r=>s=>{if(!(s.metaKey||s.ctrlKey)){if(!/^[0-9]$/.test(s.key)&&!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Delete","Tab","Backspace","Enter"].includes(s.key)){s.preventDefault();return}if(s.key==="ArrowUp"){s.preventDefault();let a={...l};r==="day"&&(l[r]===new Date(l.year,l.month,0).getDate()?(a={...a,day:1,month:l.month%12+1},a.month===1&&(a.year+=1)):a.day+=1),r==="month"&&(l[r]===12?a={...a,month:1,year:l.year+1}:a.month+=1),r==="year"&&(a.year+=1),D(a),i(new Date(a.year,a.month-1,a.day))}else if(s.key==="ArrowDown"){s.preventDefault();let a={...l};r==="day"&&(l[r]===1?(a.month-=1,a.month===0&&(a.month=12,a.year-=1),a.day=new Date(a.year,a.month,0).getDate()):a.day-=1),r==="month"&&(l[r]===1?a={...a,month:12,year:l.year-1}:a.month-=1),r==="year"&&(a.year-=1),D(a),i(new Date(a.year,a.month-1,a.day))}s.key==="ArrowRight"?(s.currentTarget.selectionStart===s.currentTarget.value.length||s.currentTarget.selectionStart===0&&s.currentTarget.selectionEnd===s.currentTarget.value.length)&&(s.preventDefault(),r==="month"&&w.current?.focus(),r==="day"&&R.current?.focus()):s.key==="ArrowLeft"&&(s.currentTarget.selectionStart===0||s.currentTarget.selectionStart===0&&s.currentTarget.selectionEnd===s.currentTarget.value.length)&&(s.preventDefault(),r==="day"&&S.current?.focus(),r==="year"&&w.current?.focus())}};return e.jsxs("div",{className:z("flex border rounded-lg items-center text-sm px-1",g),children:[e.jsx("input",{type:"text",ref:S,max:12,maxLength:2,value:l.month.toString(),onChange:j("month"),onKeyDown:d("month"),onFocus:r=>{window.innerWidth>1024&&r.target.select()},onBlur:f("month"),className:"p-0 outline-none w-6 border-none text-center",placeholder:"M"}),e.jsx("span",{className:"opacity-20 -mx-px",children:"/"}),e.jsx("input",{type:"text",ref:w,max:31,maxLength:2,value:l.day.toString(),onChange:j("day"),onKeyDown:d("day"),onFocus:r=>{window.innerWidth>1024&&r.target.select()},onBlur:f("day"),className:"p-0 outline-none w-6 border-none text-center",placeholder:"D"}),e.jsx("span",{className:"opacity-20 -mx-px",children:"/"}),e.jsx("input",{type:"text",ref:R,max:9999,maxLength:4,value:l.year.toString(),onChange:j("year"),onKeyDown:d("year"),onFocus:r=>{window.innerWidth>1024&&r.target.select()},onBlur:f("year"),className:"p-0 outline-none w-12 border-none text-center",placeholder:"YYYY"})]})},k=({initialDateFrom:n=new Date(new Date().setHours(0,0,0,0)),initialDateTo:i,initialCompareFrom:g,initialCompareTo:l,onUpdate:D,align:S="end",locale:w="en-US",showCompare:R=!0})=>{const[y,j]=u.useState(!1),[c,f]=u.useState({from:h(n),to:h(i||n)}),[d,r]=u.useState(g?{from:new Date(new Date(g).setHours(0,0,0,0)),to:l?new Date(new Date(l).setHours(0,0,0,0)):new Date(new Date(g).setHours(0,0,0,0))}:void 0),s=u.useRef(void 0),a=u.useRef(void 0),[x,v]=u.useState(void 0),[B,q]=u.useState(typeof window<"u"?window.innerWidth<960:!1);u.useEffect(()=>{const t=()=>{q(window.innerWidth<960)};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[]);const I=t=>{const m=U.find(({name:Y})=>Y===t);if(!m)throw new Error(`Unknown date range preset: ${t}`);const o=new Date,p=new Date,T=o.getDate()-o.getDay();switch(m.name){case"today":o.setHours(0,0,0,0),p.setHours(23,59,59,999);break;case"yesterday":o.setDate(o.getDate()-1),o.setHours(0,0,0,0),p.setDate(p.getDate()-1),p.setHours(23,59,59,999);break;case"last7":o.setDate(o.getDate()-6),o.setHours(0,0,0,0),p.setHours(23,59,59,999);break;case"last14":o.setDate(o.getDate()-13),o.setHours(0,0,0,0),p.setHours(23,59,59,999);break;case"last30":o.setDate(o.getDate()-29),o.setHours(0,0,0,0),p.setHours(23,59,59,999);break;case"thisWeek":o.setDate(T),o.setHours(0,0,0,0),p.setHours(23,59,59,999);break;case"lastWeek":o.setDate(o.getDate()-7-o.getDay()),p.setDate(p.getDate()-p.getDay()-1),o.setHours(0,0,0,0),p.setHours(23,59,59,999);break;case"thisMonth":o.setDate(1),o.setHours(0,0,0,0),p.setHours(23,59,59,999);break;case"lastMonth":o.setMonth(o.getMonth()-1),o.setDate(1),o.setHours(0,0,0,0),p.setDate(0),p.setHours(23,59,59,999);break}return{from:o,to:p}},O=t=>{const m=I(t);if(f(m),d){const o={from:new Date(m.from.getFullYear()-1,m.from.getMonth(),m.from.getDate()),to:m.to?new Date(m.to.getFullYear()-1,m.to.getMonth(),m.to.getDate()):void 0};r(o)}},$=()=>{for(const t of U){const m=I(t.name),o=new Date(c.from);o.setHours(0,0,0,0);const p=new Date(m.from.setHours(0,0,0,0)),T=new Date(c.to??0);T.setHours(0,0,0,0);const Y=new Date(m.to?.setHours(0,0,0,0)??0);if(o.getTime()===p.getTime()&&T.getTime()===Y.getTime()){v(t.name);return}}v(void 0)},V=()=>{f({from:typeof n=="string"?h(n):n,to:i?typeof i=="string"?h(i):i:typeof n=="string"?h(n):n}),r(g?{from:typeof g=="string"?h(g):g,to:l?typeof l=="string"?h(l):l:typeof g=="string"?h(g):g}:void 0)};u.useEffect(()=>{$()},[c]);const _=({preset:t,label:m,isSelected:o})=>e.jsx(N,{className:z(o&&"pointer-events-none"),variant:"ghost",onClick:()=>{O(t)},children:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:z("pr-2 opacity-0",o&&"opacity-70"),children:e.jsx(ae,{width:18,height:18})}),m]})}),K=(t,m)=>!t||!m?t===m:t.from.getTime()===m.from.getTime()&&(!t.to||!m.to||t.to.getTime()===m.to.getTime());return u.useEffect(()=>{y&&(s.current=c,a.current=d)},[y]),e.jsxs(G,{modal:!0,open:y,onOpenChange:t=>{t||V(),j(t)},children:[e.jsx(J,{asChild:!0,children:e.jsxs(N,{size:"lg",variant:"outline",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"py-1",children:e.jsx("div",{children:`${b(c.from,w)}${c.to!=null?" - "+b(c.to,w):""}`})}),d!=null&&e.jsx("div",{className:"opacity-60 text-xs -mt-1",children:e.jsxs(e.Fragment,{children:["vs. ",b(d.from,w),d.to!=null?` - ${b(d.to,w)}`:""]})})]}),e.jsx("div",{className:"pl-1 opacity-60 -mr-2 scale-125",children:y?e.jsx(te,{width:24}):e.jsx(re,{width:24})})]})}),e.jsxs(Q,{align:S,className:"w-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row py-2",children:[e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex flex-col lg:flex-row gap-2 px-3 justify-end items-center lg:items-start pb-4 lg:pb-0",children:e.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{className:"w-full justify-center",value:c.from,onChange:t=>{const m=c.to==null||t>c.to?t:c.to;f(o=>({...o,from:t,to:m}))}}),e.jsx("div",{className:"py-1",children:"-"}),e.jsx(P,{className:"w-full justify-center",value:c.to,onChange:t=>{const m=t<c.from?t:c.from;f(o=>({...o,from:m,to:t}))}})]}),d!=null&&e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx("p",{children:"vs."}),e.jsx(P,{className:"w-full justify-center",value:d?.from,onChange:t=>{if(d){const m=d.to==null||t>d.to?t:d.to;r(o=>({...o,from:t,to:m}))}else r({from:t,to:new Date})}}),e.jsx("div",{className:"py-1",children:"-"}),e.jsx(P,{className:"w-full justify-center",value:d?.to,onChange:t=>{if(d&&d.from){const m=t<d.from?t:d.from;r({...d,from:m,to:t})}}})]})]})}),e.jsx("div",{children:e.jsx(X,{mode:"range",onSelect:t=>{t?.from!=null&&f({from:t.from,to:t?.to})},selected:c,numberOfMonths:B?1:2,defaultMonth:new Date(new Date().setMonth(new Date().getMonth()-(B?0:1)))})})]})}),e.jsx("div",{className:"flex flex-row md:flex-col gap-1",children:U.map(t=>e.jsx(_,{preset:t.name,label:t.label,isSelected:x===t.name},t.name))})]}),e.jsxs("div",{className:"flex justify-end gap-2 py-2 pr-4",children:[e.jsx("div",{className:"flex grow gap-2 w-full",children:R&&e.jsxs("div",{className:"flex items-center space-x-2 pr-4 py-1",children:[e.jsx(ee,{defaultChecked:!!d,onCheckedChange:t=>{t?(c.to||f({from:c.from,to:c.from}),r({from:new Date(c.from.getFullYear(),c.from.getMonth(),c.from.getDate()-365),to:c.to?new Date(c.to.getFullYear()-1,c.to.getMonth(),c.to.getDate()):new Date(c.from.getFullYear()-1,c.from.getMonth(),c.from.getDate())})):r(void 0)},id:"compare-mode"}),e.jsx(Z,{htmlFor:"compare-mode",children:"Compare"})]})}),e.jsx(N,{onClick:()=>{j(!1),V()},variant:"ghost",children:"Cancel"}),e.jsx(N,{onClick:()=>{j(!1),(!K(c,s.current)||!K(d,a.current))&&D?.({range:c,rangeCompare:d})},children:"Update"})]})]})]})};k.displayName="DateRangePicker";k.filePath="libs/shared/ui-kit/src/lib/date-range-picker/date-range-picker.tsx";k.__docgenInfo={description:"The DateRangePicker component allows a user to select a range of dates",methods:[],displayName:"DateRangePicker",props:{initialDateFrom:{defaultValue:{value:"new Date(new Date().setHours(0, 0, 0, 0))",computed:!1},required:!1},align:{defaultValue:{value:"'end'",computed:!1},required:!1},locale:{defaultValue:{value:"'en-US'",computed:!1},required:!1},showCompare:{defaultValue:{value:"true",computed:!1},required:!1}}};const Ae={title:"UI/DateRangePicker",component:k,tags:["autodocs"],parameters:{layout:"centered"},argTypes:{align:{control:"select",options:["start","center","end"],description:"Alignment of the popover"},locale:{control:"text",description:"Locale for date formatting"},showCompare:{control:"boolean",description:"Enable/disable compare mode"}}},C=n=>{const[i,g]=u.useState({from:n.initialDateFrom,to:n.initialDateTo,compareFrom:n.initialCompareFrom,compareTo:n.initialCompareTo});return e.jsxs("div",{className:"flex flex-col items-center gap-8",children:[e.jsx(k,{...n,initialDateFrom:i.from,initialDateTo:i.to,initialCompareFrom:i.compareFrom,initialCompareTo:i.compareTo,onUpdate:l=>{g({from:l.range.from,to:l.range.to,compareFrom:l.rangeCompare?.from,compareTo:l.rangeCompare?.to}),n.onUpdate?.(l)}}),e.jsxs("div",{className:"text-sm text-muted-foreground bg-slate-100 p-4 rounded-md max-w-md",children:[e.jsx("p",{children:e.jsx("strong",{children:"Selected Range:"})}),e.jsxs("p",{children:["From: ",i.from instanceof Date?i.from.toLocaleDateString():i.from]}),e.jsxs("p",{children:["To: ",i.to instanceof Date?i.to.toLocaleDateString():i.to]}),n.showCompare&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"mt-2",children:e.jsx("strong",{children:"Compare Range:"})}),e.jsxs("p",{children:["From: ",i.compareFrom instanceof Date?i.compareFrom.toLocaleDateString():i.compareFrom||"N/A"]}),e.jsxs("p",{children:["To: ",i.compareTo instanceof Date?i.compareTo.toLocaleDateString():i.compareTo||"N/A"]})]})]})]})},H={render:n=>e.jsx(C,{...n}),args:{showCompare:!0,align:"center"}},W={render:n=>e.jsx(C,{...n}),args:{initialDateFrom:new Date(new Date().setDate(new Date().getDate()-7)),initialDateTo:new Date,showCompare:!0,align:"center"}},F={render:n=>e.jsx(C,{...n}),args:{showCompare:!1,align:"center"}},L={render:n=>e.jsx(C,{...n}),args:{showCompare:!0,initialDateFrom:new Date(2023,0,1),initialDateTo:new Date(2023,0,31),initialCompareFrom:new Date(2022,0,1),initialCompareTo:new Date(2022,0,31),align:"center"}},M={render:n=>e.jsx(C,{...n}),args:{align:"start",showCompare:!0}},E={render:n=>e.jsx(C,{...n}),args:{locale:"de-DE",align:"center",showCompare:!0}},A={render:n=>e.jsx(C,{...n}),args:{initialDateFrom:"2024-01-01",initialDateTo:"2024-01-31",showCompare:!0,align:"center"}};H.parameters={...H.parameters,docs:{...H.parameters?.docs,source:{originalSource:`{
  render: args => <DateRangePickerWrapper {...args} />,
  args: {
    showCompare: true,
    align: 'center'
  }
}`,...H.parameters?.docs?.source}}};W.parameters={...W.parameters,docs:{...W.parameters?.docs,source:{originalSource:`{
  render: args => <DateRangePickerWrapper {...args} />,
  args: {
    initialDateFrom: new Date(new Date().setDate(new Date().getDate() - 7)),
    // Last 7 days
    initialDateTo: new Date(),
    showCompare: true,
    align: 'center'
  }
}`,...W.parameters?.docs?.source}}};F.parameters={...F.parameters,docs:{...F.parameters?.docs,source:{originalSource:`{
  render: args => <DateRangePickerWrapper {...args} />,
  args: {
    showCompare: false,
    align: 'center'
  }
}`,...F.parameters?.docs?.source}}};L.parameters={...L.parameters,docs:{...L.parameters?.docs,source:{originalSource:`{
  render: args => <DateRangePickerWrapper {...args} />,
  args: {
    showCompare: true,
    initialDateFrom: new Date(2023, 0, 1),
    initialDateTo: new Date(2023, 0, 31),
    initialCompareFrom: new Date(2022, 0, 1),
    initialCompareTo: new Date(2022, 0, 31),
    align: 'center'
  }
}`,...L.parameters?.docs?.source}}};M.parameters={...M.parameters,docs:{...M.parameters?.docs,source:{originalSource:`{
  render: args => <DateRangePickerWrapper {...args} />,
  args: {
    align: 'start',
    showCompare: true
  }
}`,...M.parameters?.docs?.source}}};E.parameters={...E.parameters,docs:{...E.parameters?.docs,source:{originalSource:`{
  render: args => <DateRangePickerWrapper {...args} />,
  args: {
    locale: 'de-DE',
    align: 'center',
    showCompare: true
  }
}`,...E.parameters?.docs?.source}}};A.parameters={...A.parameters,docs:{...A.parameters?.docs,source:{originalSource:`{
  render: args => <DateRangePickerWrapper {...args} />,
  args: {
    initialDateFrom: '2024-01-01',
    initialDateTo: '2024-01-31',
    showCompare: true,
    align: 'center'
  }
}`,...A.parameters?.docs?.source}}};const Ye=["Default","WithInitialRange","WithoutCompare","WithComparePresets","AlignStart","LocaleGerman","WithStringInitialValues"];export{M as AlignStart,H as Default,E as LocaleGerman,L as WithComparePresets,W as WithInitialRange,A as WithStringInitialValues,F as WithoutCompare,Ye as __namedExportsOrder,Ae as default};
