import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r as u}from"./iframe-5VSXgaGr.js";import{B as k}from"./button-DXGWBi7N.js";import{P as ee,a as te,b as re}from"./popover-BoQnnjIH.js";import{C as ae}from"./calendar-ROIsRMoz.js";import{L as $}from"./label-DevjDXnF.js";import{S as _}from"./switch-4LyCE-Oh.js";import{c as V}from"./utils-CDN07tui.js";import{f as ne,g as G,S as oe,a as se,b as ce}from"./sheet-BS-bH83t.js";import{C as le}from"./chevron-up-rgX6xJCT.js";import{C as ie}from"./chevron-down-D4zFxMe2.js";import{C as me}from"./check-foGC6GUT.js";import"./preload-helper-PPVm8Dsz.js";import"./index-Dhj2PuzD.js";import"./index-CZ2Vfvrl.js";import"./index-B_jtOnfb.js";import"./index-NI9Ql3bK.js";import"./index-CIZoGkhL.js";import"./index-ezsSW86d.js";import"./index-BLVQJD9n.js";import"./index-CREXWKfe.js";import"./index-Kgb3Uswv.js";import"./index-C-4_Fe2c.js";import"./index-BOV_DlIl.js";import"./index-C9nCdb5S.js";import"./index-BKEJRegv.js";import"./index-CNSW7TUu.js";import"./index-B3t2youv.js";import"./index-DuOSvMUT.js";import"./index-Dh-gvdrz.js";import"./chevron-left-CWM_ej_5.js";import"./createLucideIcon-CBNv5Nc_.js";import"./chevron-right-C7oL6UO3.js";import"./index-CzEEc7kP.js";import"./index-DDWP0u4B.js";import"./x-C_AkMVZt.js";const P=(o,l="en-us")=>o.toLocaleDateString(l,{month:"short",day:"numeric",year:"numeric"}),x=o=>{if(typeof o=="string"){const l=o.split("-").map(i=>parseInt(i,10));return new Date(l[0],l[1]-1,l[2])}else return o},I=[{name:"today",label:"Today"},{name:"yesterday",label:"Yesterday"},{name:"last7",label:"Last 7 days"},{name:"last14",label:"Last 14 days"},{name:"last30",label:"Last 30 days"},{name:"thisWeek",label:"This Week"},{name:"lastWeek",label:"Last Week"},{name:"thisMonth",label:"This Month"},{name:"lastMonth",label:"Last Month"}],H=({value:o,onChange:l,className:g})=>{const[i,h]=u.useState(()=>{const a=o?new Date(o):new Date;return{day:a.getDate(),month:a.getMonth()+1,year:a.getFullYear()}}),N=u.useRef(null),w=u.useRef(null),S=u.useRef(null);u.useEffect(()=>{const a=o?new Date(o):new Date;h({day:a.getDate(),month:a.getMonth()+1,year:a.getFullYear()})},[o]);const j=(a,c)=>{if(a==="day"&&(c<1||c>31)||a==="month"&&(c<1||c>12)||a==="year"&&(c<1e3||c>9999))return!1;const n={...i,[a]:c},y=new Date(n.year,n.month-1,n.day);return y.getFullYear()===n.year&&y.getMonth()+1===n.month&&y.getDate()===n.day},D=a=>c=>{const n=c.target.value?Number(c.target.value):"",y=typeof n=="number"&&j(a,n),v={...i,[a]:n};h(v),y&&l(new Date(v.year,v.month-1,v.day))},r=u.useRef(i),f=a=>c=>{if(!c.target.value){h(r.current);return}const n=Number(c.target.value);j(a,n)?r.current={...i,[a]:n}:h(r.current)},d=a=>c=>{if(!(c.metaKey||c.ctrlKey)){if(!/^[0-9]$/.test(c.key)&&!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Delete","Tab","Backspace","Enter"].includes(c.key)){c.preventDefault();return}if(c.key==="ArrowUp"){c.preventDefault();let n={...i};a==="day"&&(i[a]===new Date(i.year,i.month,0).getDate()?(n={...n,day:1,month:i.month%12+1},n.month===1&&(n.year+=1)):n.day+=1),a==="month"&&(i[a]===12?n={...n,month:1,year:i.year+1}:n.month+=1),a==="year"&&(n.year+=1),h(n),l(new Date(n.year,n.month-1,n.day))}else if(c.key==="ArrowDown"){c.preventDefault();let n={...i};a==="day"&&(i[a]===1?(n.month-=1,n.month===0&&(n.month=12,n.year-=1),n.day=new Date(n.year,n.month,0).getDate()):n.day-=1),a==="month"&&(i[a]===1?n={...n,month:12,year:i.year-1}:n.month-=1),a==="year"&&(n.year-=1),h(n),l(new Date(n.year,n.month-1,n.day))}c.key==="ArrowRight"?(c.currentTarget.selectionStart===c.currentTarget.value.length||c.currentTarget.selectionStart===0&&c.currentTarget.selectionEnd===c.currentTarget.value.length)&&(c.preventDefault(),a==="month"&&w.current?.focus(),a==="day"&&S.current?.focus()):c.key==="ArrowLeft"&&(c.currentTarget.selectionStart===0||c.currentTarget.selectionStart===0&&c.currentTarget.selectionEnd===c.currentTarget.value.length)&&(c.preventDefault(),a==="day"&&N.current?.focus(),a==="year"&&w.current?.focus())}};return e.jsxs("div",{className:V("flex border rounded-lg items-center text-sm px-1",g),children:[e.jsx("input",{type:"text",ref:N,max:12,maxLength:2,value:i.month.toString(),onChange:D("month"),onKeyDown:d("month"),onFocus:a=>{window.innerWidth>1024&&a.target.select()},onBlur:f("month"),className:"p-0 outline-none w-6 border-none text-center",placeholder:"M"}),e.jsx("span",{className:"opacity-20 -mx-px",children:"/"}),e.jsx("input",{type:"text",ref:w,max:31,maxLength:2,value:i.day.toString(),onChange:D("day"),onKeyDown:d("day"),onFocus:a=>{window.innerWidth>1024&&a.target.select()},onBlur:f("day"),className:"p-0 outline-none w-6 border-none text-center",placeholder:"D"}),e.jsx("span",{className:"opacity-20 -mx-px",children:"/"}),e.jsx("input",{type:"text",ref:S,max:9999,maxLength:4,value:i.year.toString(),onChange:D("year"),onKeyDown:d("year"),onFocus:a=>{window.innerWidth>1024&&a.target.select()},onBlur:f("year"),className:"p-0 outline-none w-12 border-none text-center",placeholder:"YYYY"})]})},R=({initialDateFrom:o=new Date(new Date().setHours(0,0,0,0)),initialDateTo:l,initialCompareFrom:g,initialCompareTo:i,onUpdate:h,align:N="end",locale:w="en-US",showCompare:S=!0})=>{const[j,D]=u.useState(!1),[r,f]=u.useState({from:x(o),to:x(l||o)}),[d,a]=u.useState(g?{from:new Date(new Date(g).setHours(0,0,0,0)),to:i?new Date(new Date(i).setHours(0,0,0,0)):new Date(new Date(g).setHours(0,0,0,0))}:void 0),c=u.useRef(void 0),n=u.useRef(void 0),[y,v]=u.useState(void 0),[T,J]=u.useState(typeof window<"u"?window.innerWidth<960:!1);u.useEffect(()=>{const t=()=>{J(window.innerWidth<960)};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[]);const K=t=>{const m=I.find(({name:z})=>z===t);if(!m)throw new Error(`Unknown date range preset: ${t}`);const s=new Date,p=new Date,F=s.getDate()-s.getDay();switch(m.name){case"today":s.setHours(0,0,0,0),p.setHours(23,59,59,999);break;case"yesterday":s.setDate(s.getDate()-1),s.setHours(0,0,0,0),p.setDate(p.getDate()-1),p.setHours(23,59,59,999);break;case"last7":s.setDate(s.getDate()-6),s.setHours(0,0,0,0),p.setHours(23,59,59,999);break;case"last14":s.setDate(s.getDate()-13),s.setHours(0,0,0,0),p.setHours(23,59,59,999);break;case"last30":s.setDate(s.getDate()-29),s.setHours(0,0,0,0),p.setHours(23,59,59,999);break;case"thisWeek":s.setDate(F),s.setHours(0,0,0,0),p.setHours(23,59,59,999);break;case"lastWeek":s.setDate(s.getDate()-7-s.getDay()),p.setDate(p.getDate()-p.getDay()-1),s.setHours(0,0,0,0),p.setHours(23,59,59,999);break;case"thisMonth":s.setDate(1),s.setHours(0,0,0,0),p.setHours(23,59,59,999);break;case"lastMonth":s.setMonth(s.getMonth()-1),s.setDate(1),s.setHours(0,0,0,0),p.setDate(0),p.setHours(23,59,59,999);break}return{from:s,to:p}},Q=t=>{const m=K(t);if(f(m),d){const s={from:new Date(m.from.getFullYear()-1,m.from.getMonth(),m.from.getDate()),to:m.to?new Date(m.to.getFullYear()-1,m.to.getMonth(),m.to.getDate()):void 0};a(s)}},X=()=>{for(const t of I){const m=K(t.name),s=new Date(r.from);s.setHours(0,0,0,0);const p=new Date(m.from.setHours(0,0,0,0)),F=new Date(r.to??0);F.setHours(0,0,0,0);const z=new Date(m.to?.setHours(0,0,0,0)??0);if(s.getTime()===p.getTime()&&F.getTime()===z.getTime()){v(t.name);return}}v(void 0)},U=()=>{f({from:typeof o=="string"?x(o):o,to:l?typeof l=="string"?x(l):l:typeof o=="string"?x(o):o}),a(g?{from:typeof g=="string"?x(g):g,to:i?typeof i=="string"?x(i):i:typeof g=="string"?x(g):g}:void 0)};u.useEffect(()=>{X()},[r]);const Z=({preset:t,label:m,isSelected:s})=>e.jsx(k,{className:V(s&&"pointer-events-none"),variant:"ghost",onClick:()=>{Q(t)},children:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:V("pr-2 opacity-0",s&&"opacity-70"),children:e.jsx(me,{width:18,height:18})}),m]})}),b=(t,m)=>!t||!m?t===m:t.from.getTime()===m.from.getTime()&&(!t.to||!m.to||t.to.getTime()===m.to.getTime());u.useEffect(()=>{j&&(c.current=r,n.current=d)},[j]);const q=e.jsxs(k,{size:"lg",variant:"outline",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"py-1",children:e.jsx("div",{children:`${P(r.from,w)}${r.to!=null?" - "+P(r.to,w):""}`})}),d!=null&&e.jsx("div",{className:"opacity-60 text-xs -mt-1",children:e.jsxs(e.Fragment,{children:["vs. ",P(d.from,w),d.to!=null?` - ${P(d.to,w)}`:""]})})]}),e.jsx("div",{className:"pl-1 opacity-60 -mr-2 scale-125",children:j?e.jsx(le,{width:24}):e.jsx(ie,{width:24})})]}),O=e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-row py-2",children:[e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex flex-col lg:flex-row gap-2 px-3 justify-end items-center lg:items-start pb-4 lg:pb-0",children:e.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(H,{className:"w-full justify-center",value:r.from,onChange:t=>{const m=r.to==null||t>r.to?t:r.to;f(s=>({...s,from:t,to:m}))}}),e.jsx("div",{className:"py-1",children:"-"}),e.jsx(H,{className:"w-full justify-center",value:r.to,onChange:t=>{const m=t<r.from?t:r.from;f(s=>({...s,from:m,to:t}))}})]}),d!=null&&e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx("p",{children:"vs."}),e.jsx(H,{className:"w-full justify-center",value:d?.from,onChange:t=>{if(d){const m=d.to==null||t>d.to?t:d.to;a(s=>({...s,from:t,to:m}))}else a({from:t,to:new Date})}}),e.jsx("div",{className:"py-1",children:"-"}),e.jsx(H,{className:"w-full justify-center",value:d?.to,onChange:t=>{if(d&&d.from){const m=t<d.from?t:d.from;a({...d,from:m,to:t})}}})]})]})}),e.jsx("div",{children:e.jsx(ae,{mode:"range",onSelect:t=>{t?.from!=null&&f({from:t.from,to:t?.to})},selected:r,numberOfMonths:T?1:2,defaultMonth:new Date(new Date().setMonth(new Date().getMonth()-(T?0:1)))})})]})}),e.jsx("div",{className:"max-w-[200px] overflow-x-auto ",children:e.jsx("div",{className:"flex flex-col gap-1 items-end",children:I.map(t=>e.jsx(Z,{preset:t.name,label:t.label,isSelected:y===t.name},t.name))})})]}),T?e.jsxs(ne,{children:[e.jsx("div",{className:"flex grow gap-2 w-full",children:S&&e.jsxs("div",{className:"flex items-center space-x-2 pr-4 py-1",children:[e.jsx(_,{defaultChecked:!!d,onCheckedChange:t=>{t?(r.to||f({from:r.from,to:r.from}),a({from:new Date(r.from.getFullYear(),r.from.getMonth(),r.from.getDate()-365),to:r.to?new Date(r.to.getFullYear()-1,r.to.getMonth(),r.to.getDate()):new Date(r.from.getFullYear()-1,r.from.getMonth(),r.from.getDate())})):a(void 0)},id:"compare-mode"}),e.jsx($,{htmlFor:"compare-mode",children:"Compare"})]})}),e.jsx(G,{asChild:!0,children:e.jsx(k,{onClick:()=>{D(!1),U()},variant:"ghost",children:"Cancel"})}),e.jsx(G,{asChild:!0,children:e.jsx(k,{onClick:()=>{D(!1),(!b(r,c.current)||!b(d,n.current))&&h?.({range:r,rangeCompare:d})},children:"Update"})})]}):e.jsxs("div",{className:"flex justify-end gap-2 py-2 pr-4",children:[e.jsx("div",{className:"flex grow gap-2 w-full",children:S&&e.jsxs("div",{className:"flex items-center space-x-2 pr-4 py-1",children:[e.jsx(_,{defaultChecked:!!d,onCheckedChange:t=>{t?(r.to||f({from:r.from,to:r.from}),a({from:new Date(r.from.getFullYear(),r.from.getMonth(),r.from.getDate()-365),to:r.to?new Date(r.to.getFullYear()-1,r.to.getMonth(),r.to.getDate()):new Date(r.from.getFullYear()-1,r.from.getMonth(),r.from.getDate())})):a(void 0)},id:"compare-mode"}),e.jsx($,{htmlFor:"compare-mode",children:"Compare"})]})}),e.jsx(k,{onClick:()=>{D(!1),U()},variant:"ghost",children:"Cancel"}),e.jsx(k,{onClick:()=>{D(!1),(!b(r,c.current)||!b(d,n.current))&&h?.({range:r,rangeCompare:d})},children:"Update"})]})]});return T?e.jsxs(oe,{children:[e.jsx(se,{asChild:!0,children:q}),e.jsx(ce,{side:"bottom",children:O})]}):e.jsxs(ee,{modal:!0,open:j,onOpenChange:t=>{t||U(),D(t)},children:[e.jsx(te,{asChild:!0,children:q}),e.jsx(re,{align:N,className:"w-auto max-w-[98dvw] md:max-w-none",children:O})]})};R.displayName="DateRangePicker";R.filePath="libs/shared/ui-kit/src/lib/date-range-picker/date-range-picker.tsx";R.__docgenInfo={description:"The DateRangePicker component allows a user to select a range of dates",methods:[],displayName:"DateRangePicker",props:{initialDateFrom:{defaultValue:{value:"new Date(new Date().setHours(0, 0, 0, 0))",computed:!1},required:!1},align:{defaultValue:{value:"'end'",computed:!1},required:!1},locale:{defaultValue:{value:"'en-US'",computed:!1},required:!1},showCompare:{defaultValue:{value:"true",computed:!1},required:!1}}};const $e={title:"UI/DateRangePicker",component:R,tags:["autodocs"],parameters:{layout:"centered"},argTypes:{align:{control:"select",options:["start","center","end"],description:"Alignment of the popover"},locale:{control:"text",description:"Locale for date formatting"},showCompare:{control:"boolean",description:"Enable/disable compare mode"}}},C=o=>{const[l,g]=u.useState({from:o.initialDateFrom,to:o.initialDateTo,compareFrom:o.initialCompareFrom,compareTo:o.initialCompareTo});return e.jsxs("div",{className:"flex flex-col items-center gap-8",children:[e.jsx(R,{...o,initialDateFrom:l.from,initialDateTo:l.to,initialCompareFrom:l.compareFrom,initialCompareTo:l.compareTo,onUpdate:i=>{g({from:i.range.from,to:i.range.to,compareFrom:i.rangeCompare?.from,compareTo:i.rangeCompare?.to}),o.onUpdate?.(i)}}),e.jsxs("div",{className:"text-sm text-muted-foreground bg-slate-100 p-4 rounded-md max-w-md",children:[e.jsx("p",{children:e.jsx("strong",{children:"Selected Range:"})}),e.jsxs("p",{children:["From: ",l.from instanceof Date?l.from.toLocaleDateString():l.from]}),e.jsxs("p",{children:["To: ",l.to instanceof Date?l.to.toLocaleDateString():l.to]}),o.showCompare&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"mt-2",children:e.jsx("strong",{children:"Compare Range:"})}),e.jsxs("p",{children:["From: ",l.compareFrom instanceof Date?l.compareFrom.toLocaleDateString():l.compareFrom||"N/A"]}),e.jsxs("p",{children:["To: ",l.compareTo instanceof Date?l.compareTo.toLocaleDateString():l.compareTo||"N/A"]})]})]})]})},W={render:o=>e.jsx(C,{...o}),args:{showCompare:!0,align:"center"}},M={render:o=>e.jsx(C,{...o}),args:{initialDateFrom:new Date(new Date().setDate(new Date().getDate()-7)),initialDateTo:new Date,showCompare:!0,align:"center"}},L={render:o=>e.jsx(C,{...o}),args:{showCompare:!1,align:"center"}},E={render:o=>e.jsx(C,{...o}),args:{showCompare:!0,initialDateFrom:new Date(2023,0,1),initialDateTo:new Date(2023,0,31),initialCompareFrom:new Date(2022,0,1),initialCompareTo:new Date(2022,0,31),align:"center"}},Y={render:o=>e.jsx(C,{...o}),args:{align:"start",showCompare:!0}},A={render:o=>e.jsx(C,{...o}),args:{locale:"de-DE",align:"center",showCompare:!0}},B={render:o=>e.jsx(C,{...o}),args:{initialDateFrom:"2024-01-01",initialDateTo:"2024-01-31",showCompare:!0,align:"center"}};W.parameters={...W.parameters,docs:{...W.parameters?.docs,source:{originalSource:`{
  render: args => <DateRangePickerWrapper {...args} />,
  args: {
    showCompare: true,
    align: 'center'
  }
}`,...W.parameters?.docs?.source}}};M.parameters={...M.parameters,docs:{...M.parameters?.docs,source:{originalSource:`{
  render: args => <DateRangePickerWrapper {...args} />,
  args: {
    initialDateFrom: new Date(new Date().setDate(new Date().getDate() - 7)),
    // Last 7 days
    initialDateTo: new Date(),
    showCompare: true,
    align: 'center'
  }
}`,...M.parameters?.docs?.source}}};L.parameters={...L.parameters,docs:{...L.parameters?.docs,source:{originalSource:`{
  render: args => <DateRangePickerWrapper {...args} />,
  args: {
    showCompare: false,
    align: 'center'
  }
}`,...L.parameters?.docs?.source}}};E.parameters={...E.parameters,docs:{...E.parameters?.docs,source:{originalSource:`{
  render: args => <DateRangePickerWrapper {...args} />,
  args: {
    showCompare: true,
    initialDateFrom: new Date(2023, 0, 1),
    initialDateTo: new Date(2023, 0, 31),
    initialCompareFrom: new Date(2022, 0, 1),
    initialCompareTo: new Date(2022, 0, 31),
    align: 'center'
  }
}`,...E.parameters?.docs?.source}}};Y.parameters={...Y.parameters,docs:{...Y.parameters?.docs,source:{originalSource:`{
  render: args => <DateRangePickerWrapper {...args} />,
  args: {
    align: 'start',
    showCompare: true
  }
}`,...Y.parameters?.docs?.source}}};A.parameters={...A.parameters,docs:{...A.parameters?.docs,source:{originalSource:`{
  render: args => <DateRangePickerWrapper {...args} />,
  args: {
    locale: 'de-DE',
    align: 'center',
    showCompare: true
  }
}`,...A.parameters?.docs?.source}}};B.parameters={...B.parameters,docs:{...B.parameters?.docs,source:{originalSource:`{
  render: args => <DateRangePickerWrapper {...args} />,
  args: {
    initialDateFrom: '2024-01-01',
    initialDateTo: '2024-01-31',
    showCompare: true,
    align: 'center'
  }
}`,...B.parameters?.docs?.source}}};const _e=["Default","WithInitialRange","WithoutCompare","WithComparePresets","AlignStart","LocaleGerman","WithStringInitialValues"];export{Y as AlignStart,W as Default,A as LocaleGerman,E as WithComparePresets,M as WithInitialRange,B as WithStringInitialValues,L as WithoutCompare,_e as __namedExportsOrder,$e as default};
