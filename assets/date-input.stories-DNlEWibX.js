import{j as r}from"./jsx-runtime-u17CrQMm.js";import{a as S,r as u}from"./iframe-B1FMP7ev.js";import"./preload-helper-PPVm8Dsz.js";const i=({value:s,onChange:c})=>{const[n,o]=S.useState(()=>{const t=s?new Date(s):new Date;return{day:t.getDate(),month:t.getMonth()+1,year:t.getFullYear()}}),x=u.useRef(null),p=u.useRef(null),w=u.useRef(null);u.useEffect(()=>{const t=s?new Date(s):new Date;o({day:t.getDate(),month:t.getMonth()+1,year:t.getFullYear()})},[s]);const v=(t,a)=>{if(t==="day"&&(a<1||a>31)||t==="month"&&(a<1||a>12)||t==="year"&&(a<1e3||a>9999))return!1;const e={...n,[t]:a},l=new Date(e.year,e.month-1,e.day);return l.getFullYear()===e.year&&l.getMonth()+1===e.month&&l.getDate()===e.day},g=t=>a=>{const e=a.target.value?Number(a.target.value):"",l=typeof e=="number"&&v(t,e),d={...n,[t]:e};o(d),l&&c(new Date(d.year,d.month-1,d.day))},D=u.useRef(n),h=t=>a=>{if(!a.target.value){o(D.current);return}const e=Number(a.target.value);v(t,e)?D.current={...n,[t]:e}:o(D.current)},f=t=>a=>{if(!(a.metaKey||a.ctrlKey)){if(!/^[0-9]$/.test(a.key)&&!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Delete","Tab","Backspace","Enter"].includes(a.key)){a.preventDefault();return}if(a.key==="ArrowUp"){a.preventDefault();let e={...n};t==="day"&&(n[t]===new Date(n.year,n.month,0).getDate()?(e={...e,day:1,month:n.month%12+1},e.month===1&&(e.year+=1)):e.day+=1),t==="month"&&(n[t]===12?e={...e,month:1,year:n.year+1}:e.month+=1),t==="year"&&(e.year+=1),o(e),c(new Date(e.year,e.month-1,e.day))}else if(a.key==="ArrowDown"){a.preventDefault();let e={...n};t==="day"&&(n[t]===1?(e.month-=1,e.month===0&&(e.month=12,e.year-=1),e.day=new Date(e.year,e.month,0).getDate()):e.day-=1),t==="month"&&(n[t]===1?e={...e,month:12,year:n.year-1}:e.month-=1),t==="year"&&(e.year-=1),o(e),c(new Date(e.year,e.month-1,e.day))}a.key==="ArrowRight"?(a.currentTarget.selectionStart===a.currentTarget.value.length||a.currentTarget.selectionStart===0&&a.currentTarget.selectionEnd===a.currentTarget.value.length)&&(a.preventDefault(),t==="month"&&p.current?.focus(),t==="day"&&w.current?.focus()):a.key==="ArrowLeft"&&(a.currentTarget.selectionStart===0||a.currentTarget.selectionStart===0&&a.currentTarget.selectionEnd===a.currentTarget.value.length)&&(a.preventDefault(),t==="day"&&x.current?.focus(),t==="year"&&p.current?.focus())}};return r.jsxs("div",{className:"flex border rounded-lg items-center text-sm px-1",children:[r.jsx("input",{type:"text",ref:x,max:12,maxLength:2,value:n.month.toString(),onChange:g("month"),onKeyDown:f("month"),onFocus:t=>{window.innerWidth>1024&&t.target.select()},onBlur:h("month"),className:"p-0 outline-none w-6 border-none text-center",placeholder:"M"}),r.jsx("span",{className:"opacity-20 -mx-px",children:"/"}),r.jsx("input",{type:"text",ref:p,max:31,maxLength:2,value:n.day.toString(),onChange:g("day"),onKeyDown:f("day"),onFocus:t=>{window.innerWidth>1024&&t.target.select()},onBlur:h("day"),className:"p-0 outline-none w-7 border-none text-center",placeholder:"D"}),r.jsx("span",{className:"opacity-20 -mx-px",children:"/"}),r.jsx("input",{type:"text",ref:w,max:9999,maxLength:4,value:n.year.toString(),onChange:g("year"),onKeyDown:f("year"),onFocus:t=>{window.innerWidth>1024&&t.target.select()},onBlur:h("year"),className:"p-0 outline-none w-12 border-none text-center",placeholder:"YYYY"})]})};i.displayName="DateInput";i.__docgenInfo={description:"",methods:[],displayName:"DateInput",props:{value:{required:!1,tsType:{name:"Date"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(date: Date) => void",signature:{arguments:[{type:{name:"Date"},name:"date"}],return:{name:"void"}}},description:""}}};const I={title:"UI/DateInput",component:i,tags:["autodocs"],parameters:{layout:"centered"}},m={render:s=>{const[c,n]=u.useState(new Date);return r.jsxs("div",{className:"flex flex-col gap-4 w-[300px]",children:[r.jsx(i,{...s,value:c,onChange:o=>n(o)}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Selected: ",c.toLocaleDateString()]})]})}},y={render:s=>{const[c,n]=u.useState(new Date(2024,0,15));return r.jsxs("div",{className:"flex flex-col gap-4 w-[300px]",children:[r.jsx(i,{...s,value:c,onChange:o=>n(o)}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Selected: ",c.toLocaleDateString()]})]})}};m.parameters={...m.parameters,docs:{...m.parameters?.docs,source:{originalSource:`{
  render: args => {
    const [date, setDate] = useState<Date>(new Date());
    return <div className="flex flex-col gap-4 w-[300px]">
        <DateInput {...args} value={date} onChange={newDate => setDate(newDate)} />
        <div className="text-sm text-muted-foreground">
          Selected: {date.toLocaleDateString()}
        </div>
      </div>;
  }
}`,...m.parameters?.docs?.source}}};y.parameters={...y.parameters,docs:{...y.parameters?.docs,source:{originalSource:`{
  render: args => {
    // Fixed date: Jan 15, 2024
    const [date, setDate] = useState<Date>(new Date(2024, 0, 15));
    return <div className="flex flex-col gap-4 w-[300px]">
        <DateInput {...args} value={date} onChange={newDate => setDate(newDate)} />
        <div className="text-sm text-muted-foreground">
          Selected: {date.toLocaleDateString()}
        </div>
      </div>;
  }
}`,...y.parameters?.docs?.source}}};const R=["Default","WithInitialValue"];export{m as Default,y as WithInitialValue,R as __namedExportsOrder,I as default};
